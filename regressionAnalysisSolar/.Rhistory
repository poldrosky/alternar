library('DBI')
library('RPostgreSQL')
library('stringr')
library('kknn')
library('rminer')
source('xtable_printbold.R')
drv <- dbDriver("PostgreSQL")
con <- dbConnect(drv, dbname="landsat",host="190.254.4.128",port=5432,
user="omar",password="V3Mu02GR")
models=c("ctree", "rpart", "kknn", "mlp", "mlpe","ksvm", "randomForest", "mr",
"mars", "cubist", "pcr", "plsr", "cppls")
tableBiomass <- function(value){
query <- paste("SELECT * FROM(
SELECT
latitude, longitude, avg(band1) as band1, avg(band2) as band2,
avg(band3) as band3, avg(band4) as band4, avg(band5) as band5,
avg(band6) as band6, avg(band7) as band7
FROM
reflectance
JOIN
date_landsat
USING
(id_landsat)
WHERE
date between '01-01-2000' and '12-31-2003'
GROUP BY
latitude, longitude
having
count(*) >=", value ,") as foo
JOIN
biomass_grid_450
USING(latitude, longitude)")
table <- dbGetQuery(con, query)
return (table)
}
biomass <- tableBiomass(10)
View(biomass)
biomass <- biomass[,c(3:10)]
View(biomass)
tableIrradiance <- function(value){
query <- paste("SELECT * FROM(
SELECT
latitude, longitude, avg(band8) as band8
FROM
radianceb8avg
JOIN
date_landsat
USING
(id_landsat)
GROUP BY
latitude, longitude
having
count(*) >=", value, ") as foo
JOIN
irradiance_grid_450
USING(latitude, longitude)")
table <- dbGetQuery(con, query)
return (table)
}
irradiance <- tableIrradiance(100)
View(irradiance)
irradiance <- irradiance[,c(3:4)]
View(biomass)
View(irradiance)
cat("\\subsection{Conjunto de ",length(irradiance[,1])," datos y ",i ,"muestras}")
H=holdout(irradiance$value,ratio=2/3,seed=12345)
metrica <- c()
matrix <- c()
for(m in models){
#cat("model:",m,"\n")
M=fit(value~.,irradiance[H$tr,],model=m)
P=predict(M,irradiance[H$ts,])
metrica <- mmetric(irradiance$value[H$ts],P,"ALL")
matrix<- rbind(matrix, metrica)
}
View(irradiance)
M=fit(value~.,irradiance[H$tr,],model=cubist)
M=fit(value~.,irradiance[H$tr,],model='cubist')
M=fit(value~.,irradiance[H$tr,],model=mars)
M=fit(value~.,irradiance[H$tr,],model='mars')
M
M=fit(value~.,irradiance[H$tr,],model='ksvm')
M
P=predict(M,irradiance[H$ts,])
metrica <- mmetric(irradiance$value[H$ts],P,"ALL")
metrica
matrix<- rbind(matrix, metrica)
View(matrix)
rownames(matrix) <- models
View(matrix)
